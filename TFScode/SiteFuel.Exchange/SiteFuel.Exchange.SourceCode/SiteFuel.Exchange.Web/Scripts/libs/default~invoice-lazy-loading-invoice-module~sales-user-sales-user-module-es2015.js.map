{"version":3,"sources":["./src/app/fees/fee-list/fee-list.component.ts","./src/app/fees/fee-list/fee-list.component.html","./src/app/fees/fee-list/fee-type.component.ts","./src/app/fees/fee-list/fee-type.component.html","./src/app/fees/fee-list/filter.pipe.ts","./src/app/fees/fees.module.ts","./src/app/fees/model.ts","./src/app/fees/service/fee.service.ts","./src/app/invoice/services/invoice.service.ts"],"names":[],"mappings":"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","file":"default~invoice-lazy-loading-invoice-module~sales-user-sales-user-module-es2015.js","sourcesContent":["import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { FormGroup, FormBuilder, FormArray, Validators } from '@angular/forms';\r\nimport { FeeModel } from '../model';\r\nimport { DropdownItem, DropdownItemExt, FeeSubType } from 'src/app/statelist.service';\r\nimport { FeeService } from '../service/fee.service';\r\nimport * as moment from 'moment';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { InvoiceService } from '../../invoice/services/invoice.service';\r\nimport { FreightTableNameModel, AccessorialFeeTableDetailViewModel, DeDuplicateFees } from '../../invoice/models/DropDetail'; \r\nimport { TableType } from '../../app.enum';\r\n\r\n@Component({\r\n    selector: 'app-fee-list',\r\n    templateUrl: './fee-list.component.html',\r\n    styleUrls: ['./fee-list.component.css']\r\n})\r\nexport class FeeListComponent implements OnInit, OnChanges {\r\n\r\n    @Input() Parent: FormGroup;\r\n    @Input() public Fees: FeeModel[];\r\n    @Input() public InputAccessorialFeeDetails: AccessorialFeeTableDetailViewModel[];\r\n    @Input() public isWaitingForBol: boolean;\r\n    @Input() public isSales: boolean = false;\r\n    @Input() public IsFrieghtPricingMethodAuto: boolean;\r\n    @Input() Currency: string; // Taking currency as input to display on addon \r\n    @Input() public NoOrders: boolean;\r\n    //---------------Fees GROUP -----------\r\n\r\n    public CommonFees: FormGroup[];\r\n    public OtherFees: FormGroup[];\r\n    public SpCommonFees: FormGroup[];\r\n    public SpOtherFees: FormGroup[];\r\n\r\n    public FeeTypes: DropdownItemExt[];\r\n    public FeeSubTypes: FeeSubType[];\r\n    public FeeConstraintTypes: DropdownItem[];\r\n    public AccessorialFeeTableTypeList: DropdownItem[];\r\n    public AccessorialFeeIdList: DropdownItem[];\r\n    public SingleSelectSettingsById = {};\r\n    public MultiSelectSettingsById = {};\r\n    public AccessorialForm: FormGroup;\r\n    public group: FormGroup;\r\n    public DisplayCurrency: any;\r\n    public OrderId: number;\r\n    public currValues: FeeModel[];\r\n    constructor(private fb: FormBuilder, private feeService: FeeService, private invoiceService: InvoiceService,\r\n        private route: ActivatedRoute) {\r\n        this.CommonFees = [];\r\n        this.OtherFees = [];\r\n        this.SpCommonFees = [];\r\n        this.SpOtherFees = [];\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.AccessorialForm = this.buildForm();\r\n        this.Parent.addControl('AccessorialFeeDetails', this.AccessorialForm);\r\n        if (this.InputAccessorialFeeDetails != undefined && this.InputAccessorialFeeDetails != null) {\r\n            this.AccessorialForm.patchValue(this.InputAccessorialFeeDetails);\r\n        }\r\n        this.OrderId = parseInt(this.route.snapshot.queryParamMap.get('orderId'), 10);\r\n        this.Parent.addControl('Fees', this.fb.array([]));\r\n\r\n        this.feeService.getFeeTypes(this.OrderId, this.Currency, this.isSales)\r\n            .subscribe(data => { this.FeeTypes = data; });\r\n\r\n        this.feeService.getFeeConstraintTypes()\r\n            .subscribe((data: DropdownItem[]) => { this.FeeConstraintTypes = data; });\r\n\r\n        this.feeService.getFeeSubTypes(this.OrderId, this.Currency, this.isSales)\r\n            .subscribe((data: FeeSubType[]) => {\r\n                this.FeeSubTypes = data.filter(function (elem: FeeSubType) { return elem.FeeSubTypeId != 1 });\r\n            });\r\n        this.SingleSelectSettingsById = {\r\n            singleSelection: true,\r\n            closeDropDownOnSelection: true,\r\n            idField: 'Id',\r\n            textField: 'Name',\r\n            enableCheckAll: false,\r\n            selectAllText: 'Select All',\r\n            unSelectAllText: 'UnSelect All',\r\n            itemsShowLimit: 1,\r\n        };\r\n        this.MultiSelectSettingsById = {\r\n            singleSelection: false,\r\n            idField: 'Id',\r\n            textField: 'Name',\r\n            selectAllText: 'Select All',\r\n            unSelectAllText: 'UnSelect All',\r\n            itemsShowLimit: 5,\r\n            allowSearchFilter: true\r\n        };\r\n        this.getTableTypes();\r\n    }\r\n\r\n    ngOnChanges(change: SimpleChanges) {\r\n        if (this.NoOrders) {\r\n            this.AccessorialForm.controls['AccessorialFeeTableType'].patchValue([]);\r\n            this.AccessorialForm.controls['AccessorialFeeId'].patchValue([]);\r\n        }\r\n        if (change.Fees && change.Fees.currentValue) {\r\n            this.CommonFees = [];\r\n            this.OtherFees = [];\r\n            this.SpCommonFees = [];\r\n            this.SpOtherFees = [];\r\n\r\n            let fees = this.Parent.get('Fees') as FormArray;\r\n            if (fees) {\r\n                fees.clear();\r\n            }\r\n            this.currValues = change.Fees.currentValue as FeeModel[];\r\n            this.currValues.forEach((x: FeeModel) => {\r\n                if (x.FeeConstraintTypeId == null) {\r\n                    this.addGeneralFee(x.CommonFee, x);\r\n                } else {\r\n                    this.addSpecialFee(x.CommonFee, x.FeeConstraintTypeId, x);\r\n                }\r\n            });\r\n        }\r\n        if (change.InputAccessorialFeeDetails && change.InputAccessorialFeeDetails.currentValue) {\r\n            this.getDefaultDetail(change.InputAccessorialFeeDetails.currentValue as AccessorialFeeTableDetailViewModel[]);\r\n        }\r\n        if (change.Currency && change.Currency.currentValue) {\r\n            var currency = change.Currency.currentValue;\r\n            this.DisplayCurrency = currency;\r\n\r\n            this.feeService.getFeeTypes(0, this.DisplayCurrency, this.isSales)\r\n                .subscribe(data => { this.FeeTypes = data; });\r\n\r\n            this.feeService.getFeeConstraintTypes()\r\n                .subscribe((data: DropdownItem[]) => { this.FeeConstraintTypes = data; });\r\n\r\n            this.feeService.getFeeSubTypes(0, this.DisplayCurrency, this.isSales)\r\n                .subscribe((data: FeeSubType[]) => {\r\n                    this.FeeSubTypes = data.filter(function (elem: FeeSubType) { return elem.FeeSubTypeId != 1 });\r\n                });\r\n        }\r\n    }\r\n\r\n    buildForm(): FormGroup {\r\n        return this.fb.group({\r\n            AccessorialFeeTableType: this.fb.control(''),\r\n            AccessorialFeeId: this.fb.control([])\r\n        });\r\n    }\r\n\r\n    getForm(model: FeeModel): FormGroup {\r\n        var byQtyModel = model.DeliveryFeeByQuantity;\r\n        var byQuantity = []; var _fb = this.fb;\r\n        if (byQtyModel != undefined && byQtyModel != null) {\r\n            byQtyModel.forEach(function (elem, idx) {\r\n                byQuantity.push(_fb.group({\r\n                    Currency: _fb.control(elem.Currency),\r\n                    MinQuantity: _fb.control(elem.MinQuantity, [Validators.required]),\r\n                    MaxQuantity: _fb.control(elem.MaxQuantity, [Validators.required]),\r\n                    Fee: _fb.control(elem.Fee, [Validators.required])\r\n                }));\r\n            });\r\n        }\r\n\r\n        var _specialDate = '';\r\n        if (model.SpecialDate != null && model.SpecialDate != undefined) {\r\n            _specialDate = moment(model.SpecialDate).format('MM/DD/YYYY');\r\n            _specialDate = _specialDate == '01/01/0001' ? '' : _specialDate;\r\n        }\r\n        this.group = this.fb.group({\r\n            OrderId: this.fb.control(model.OrderId),\r\n            Currency: this.fb.control(this.DisplayCurrency),\r\n            TruckLoadType: this.fb.control(model.TruckLoadType),\r\n            TruckLoadCategoryId: this.fb.control(model.TruckLoadCategoryId),\r\n            IncludeInPPG: this.fb.control(model.IncludeInPPG),\r\n            CommonFee: this.fb.control(model.CommonFee),\r\n            FeeConstraintTypeId: this.fb.control(model.FeeConstraintTypeId),\r\n            SpecialDate: this.fb.control(_specialDate),\r\n            FeeTypeId: this.fb.control(model.FeeTypeId, [Validators.required]),\r\n            FeeSubTypeId: this.fb.control(model.FeeSubTypeId, [Validators.required]),\r\n            Fee: this.fb.control(model.Fee, [Validators.required]),\r\n            OtherFeeDescription: this.fb.control(model.OtherFeeDescription),\r\n            MinimumGallons: this.fb.control(model.MinimumGallons),\r\n            DeliveryFeeByQuantity: this.fb.array(byQuantity),\r\n        });\r\n        return this.group;\r\n    }\r\n\r\n    addGeneralFee(_commonFee: boolean, feeObj: FeeModel): void {\r\n        if (feeObj == null) {\r\n            feeObj = new FeeModel();\r\n            feeObj.CommonFee = _commonFee;\r\n        }\r\n        if (!_commonFee && (feeObj.FeeTypeId == undefined || feeObj.FeeTypeId == null || feeObj.FeeTypeId.indexOf('14') < 0)) {\r\n            feeObj.FeeTypeId = '14';\r\n        }\r\n        var feeGroup = this.getForm(feeObj);\r\n        if (_commonFee) {\r\n            this.CommonFees.push(feeGroup);\r\n        } else {\r\n            this.OtherFees.push(feeGroup);\r\n        }\r\n        (this.Parent.get('Fees') as FormArray).push(feeGroup);\r\n    }\r\n\r\n    removeGeneralFee(_commonFee: boolean, fee: FormGroup): void {\r\n        var _fees = this.Parent.get('Fees') as FormArray;\r\n        _fees.removeAt(_fees.controls.indexOf(fee));\r\n        if (_commonFee) {\r\n            this.CommonFees.splice(this.CommonFees.indexOf(fee), 1);\r\n        } else {\r\n            this.OtherFees.splice(this.OtherFees.indexOf(fee), 1);\r\n        }\r\n    }\r\n\r\n    addSpecialFee(_commonFee: boolean, typeId: number, feeObj: FeeModel): void {\r\n        if (feeObj == null) {\r\n            feeObj = new FeeModel();\r\n            feeObj.CommonFee = _commonFee;\r\n        }\r\n        if (!_commonFee && (feeObj.FeeTypeId == undefined || feeObj.FeeTypeId == null || feeObj.FeeTypeId.indexOf('14') < 0)) {\r\n            feeObj.FeeTypeId = '14';\r\n        }\r\n        feeObj.FeeConstraintTypeId = typeId;\r\n        var feeGroup = this.getForm(feeObj);\r\n        if (_commonFee) {\r\n            this.SpCommonFees.push(feeGroup);\r\n        } else {\r\n            this.SpOtherFees.push(feeGroup);\r\n        }\r\n        (this.Parent.get('Fees') as FormArray).push(feeGroup);\r\n    }\r\n\r\n    removeSpecialFee(_commonFee: boolean, fee: FormGroup): void {\r\n        var _fees = this.Parent.get('Fees') as FormArray;\r\n        _fees.removeAt(_fees.controls.indexOf(fee));\r\n        if (_commonFee) {\r\n            this.SpCommonFees.splice(this.SpCommonFees.indexOf(fee), 1);\r\n        } else {\r\n            this.SpOtherFees.splice(this.SpOtherFees.indexOf(fee), 1);\r\n        }\r\n    }\r\n\r\n    addByQtyFee(fee: FormGroup): void {\r\n        var _fees = fee.get('DeliveryFeeByQuantity') as FormArray;\r\n        var lastFee = _fees.controls[_fees.controls.length - 1].get('Fee').value;\r\n        var feeObj = new FeeModel(); feeObj.Fee = lastFee;\r\n        _fees.push(this.getForm(feeObj));\r\n    }\r\n\r\n    removeByQtyFee(fee: FormGroup, index: number): void {\r\n        var _fees = fee.get('DeliveryFeeByQuantity') as FormArray;\r\n        _fees.removeAt(index);\r\n    }\r\n\r\n    //--------------------------------------------------------------\r\n\r\n    isInvalid(drop: FormGroup, name: string): boolean {\r\n        return drop.get(name).invalid &&\r\n            (drop.get(name).dirty || drop.get(name).touched);\r\n    }\r\n\r\n    isRequired(drop: FormGroup, name: string): boolean {\r\n        return drop.get(name).errors.required;\r\n    }\r\n\r\n    isMin(drop: FormGroup, name: string): boolean {\r\n        return drop.get(name).errors.min;\r\n    }\r\n\r\n    // Accessorial\r\n    private getTableTypes(): void {\r\n        this.invoiceService.getTableTypes().subscribe(data => {\r\n            this.AccessorialFeeTableTypeList = data;\r\n            this.AccessorialFeeTableTypeList = this.AccessorialFeeTableTypeList.filter(x => x.Id != TableType.Carrier);\r\n        });\r\n    }\r\n\r\n    public OnAccessorialFeeTableTypeSelect(item: any): void {\r\n        this.AccessorialForm.get('AccessorialFeeId').patchValue([]);\r\n        this.AccessorialForm.controls['AccessorialFeeTableType'].patchValue([{ Id: item.Id, Name: item.Id == TableType.Master ? \"Master\" : \"CustomerSpecific\" }]);\r\n        this.GetAccessorialFeeId(null);\r\n    }\r\n\r\n    public GetAccessorialFeeId(selectedAccessorialId: number): void {\r\n        let input = new FreightTableNameModel();\r\n        let selectedAccessorialFeeTableType = this.AccessorialForm.get('AccessorialFeeTableType').value as DropdownItem[];\r\n\r\n        if (selectedAccessorialFeeTableType && selectedAccessorialFeeTableType.length > 0) {\r\n\r\n            let AccessorialFeeTableTypeIds = selectedAccessorialFeeTableType.map(s => s.Id);\r\n            input.TableType = AccessorialFeeTableTypeIds.join(',');\r\n            input.OrderId = this.OrderId;\r\n            this.invoiceService.getAccessorialTableName(input).subscribe(data => {\r\n\r\n                if (data && data.length > 0) {\r\n                    this.AccessorialFeeIdList = data;\r\n                    if (selectedAccessorialId) {\r\n                        this.AccessorialForm.controls['AccessorialFeeId'].patchValue(this.AccessorialFeeIdList.filter(t => t.Id == selectedAccessorialId));\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    public getDefaultDetail(AccessorialFees: AccessorialFeeTableDetailViewModel[]): void {\r\n        if(AccessorialFees && AccessorialFees.length > 0){\r\n            if (AccessorialFees.length == 1) {\r\n\r\n                let type = AccessorialFees[0].AccessorialFeeTableType;\r\n                this.AccessorialForm.controls['AccessorialFeeTableType'].patchValue([{ Id: type, Name: type == TableType.Master ? \"Master\" : \"CustomerSpecific\" }]);\r\n                this.GetAccessorialFeeId(AccessorialFees[0].AccessorialFeeId);\r\n            }\r\n            else {\r\n                this.invoiceService.GetAccessorialFeeTablesForConsolidated(null).subscribe((allTableNames: any[]) => {\r\n                    this.AccessorialFeeIdList = allTableNames;\r\n                    let AccessorialFeeIds = this.AccessorialFeeIdList.filter(this.IdInComparer(AccessorialFees));\r\n                    this.AccessorialForm.controls['AccessorialFeeId'].setValue(AccessorialFeeIds);\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    IdInComparer(otherArray) {\r\n        return function (current) {\r\n            return otherArray.filter(function (other) {\r\n                return other.Id == current.Id\r\n            }).length == 1;\r\n        }\r\n    }\r\n\r\n    public AllFeeRemove() {\r\n        if (this.CommonFees && this.CommonFees.length > 0) {\r\n            this.CommonFees.forEach(generalFees => {\r\n                this.removeGeneralFee(true, generalFees);\r\n            });\r\n            this.CommonFees = [];\r\n        }\r\n        if (this.OtherFees && this.OtherFees.length > 0) {\r\n            this.OtherFees.forEach(otherFees => {\r\n                this.removeGeneralFee(false, otherFees);\r\n            });\r\n            this.OtherFees = [];\r\n        }\r\n        if (this.SpCommonFees && this.SpCommonFees.length > 0) {\r\n            this.SpCommonFees.forEach(spFee => {\r\n                this.removeSpecialFee(true, spFee);\r\n            });\r\n            this.SpCommonFees = [];\r\n        }\r\n        if (this.SpOtherFees && this.SpOtherFees.length > 0) {\r\n            this.SpOtherFees.forEach(spOtherFee => {\r\n                this.removeSpecialFee(false, spOtherFee);\r\n            });\r\n            this.SpOtherFees = [];\r\n        }\r\n    }\r\n\r\n    public OnAccessorialFeeTableTypeDeSelect(): void {\r\n        let selectedAccessorialFeeTableType = this.AccessorialForm.get('AccessorialFeeTableType').value as DropdownItem[];\r\n        if (selectedAccessorialFeeTableType.length == 0) {\r\n            this.AccessorialForm.get('AccessorialFeeId').patchValue([]);\r\n            this.AccessorialFeeIdList = [];\r\n        }\r\n        this.AllFeeRemove();\r\n        let selectedItems = this.AccessorialForm.get(\"AccessorialFeeId\").value as DropdownItem[];\r\n        if (selectedItems != null && selectedItems != undefined) {\r\n            let feeIds = selectedItems.map(s => s.Id);\r\n            this.invoiceService.GetAccessorialFeeByAccessorialFeeId(feeIds.join(',')).subscribe(data => {\r\n                if (data && data.length > 0) {\r\n                    data.forEach(obj => {\r\n                        if (obj.FeeConstraintTypeId == null) {\r\n                            this.addGeneralFee(obj.CommonFee, obj);\r\n                        } else {\r\n                            this.addSpecialFee(obj.CommonFee, obj.FeeConstraintTypeId, obj);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    OnAccessorialFeeTableTypeDeSelectForSingle() {\r\n        this.AllFeeRemove();\r\n    }\r\n\r\n    public OnAccessorialFeeIdSelect() {\r\n        this.CommonFees = [];\r\n        this.OtherFees = [];\r\n        this.SpCommonFees = [];\r\n        this.SpOtherFees = [];\r\n\r\n        let fees = this.Parent.get('Fees') as FormArray;\r\n        if (fees) {\r\n            fees.clear();\r\n        }\r\n        let selectedItems = this.AccessorialForm.get(\"AccessorialFeeId\").value as DropdownItem[];\r\n        if (selectedItems != null && selectedItems != undefined) {\r\n            let feeIds = selectedItems.map(s => s.Id);\r\n            if (feeIds.length != 0) {\r\n                this.invoiceService.GetAccessorialFeeByAccessorialFeeId(feeIds.join(',')).subscribe(data => {\r\n                    if (feeIds.length != 1) {\r\n                        data = DeDuplicateFees(this.currValues, data);\r\n                    }\r\n                    if (data && data.length > 0) {\r\n                        data.forEach(obj => {\r\n                            if (obj.FeeConstraintTypeId == null) {\r\n                                this.addGeneralFee(obj.CommonFee, obj);\r\n                            } else {\r\n                                this.addSpecialFee(obj.CommonFee, obj.FeeConstraintTypeId, obj);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.OnAccessorialFeeTableTypeDeSelect();\r\n        }\r\n    }\r\n}\r\n\r\nfunction requiredIfValidator(predicate) {\r\n    return (formControl => {\r\n        if (!formControl.parent) {\r\n            return null;\r\n        }\r\n        if (predicate()) {\r\n            return Validators.required(formControl);\r\n        }\r\n        return null;\r\n    })\r\n}","<div [formGroup]=\"Parent\">\r\n    <div class=\"well box-shadow\">\r\n        <div [formGroup]=\"AccessorialForm\">\r\n            <h4 *ngIf=\"!IsFrieghtPricingMethodAuto\">Freight Cost / Fees</h4>\r\n            <div *ngIf=\"IsFrieghtPricingMethodAuto\">\r\n                <h3>Accessorial Fees</h3>\r\n                <div class=\"row\">\r\n\r\n                    <div class=\"col-sm-3\" *ngIf=\"Parent.get('SelectedOrders').value.length==0\">\r\n                        <h5>Table Type</h5>\r\n                        <div class=\"form-group\">\r\n                            <ng-multiselect-dropdown formControlName=\"AccessorialFeeTableType\"\r\n                                                     [placeholder]=\"'Table Type'\"\r\n                                                     class=\"single-select\"\r\n                                                     (onSelect)=\"OnAccessorialFeeTableTypeSelect($event)\"\r\n                                                     (onDeSelect)=\"OnAccessorialFeeTableTypeDeSelect()\"\r\n                                                     [settings]=\"SingleSelectSettingsById\"\r\n                                                     [data]=\"AccessorialFeeTableTypeList\">\r\n                            </ng-multiselect-dropdown>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-3\">\r\n                        <h5>Accessorial Fees Table Name</h5>\r\n                        <div class=\"form-group\" *ngIf=\"Parent.get('SelectedOrders').value.length==0\">\r\n                            <ng-multiselect-dropdown formControlName=\"AccessorialFeeId\"\r\n                                                     [placeholder]=\"'Type'\"\r\n                                                     class=\"single-select\"\r\n                                                     (onSelect)=\"OnAccessorialFeeIdSelect()\"   \r\n                                                      (onDeSelect)=\"OnAccessorialFeeTableTypeDeSelectForSingle()\"\r\n                                                     [settings]=\"SingleSelectSettingsById\"\r\n                                                     [data]=\"AccessorialFeeIdList\">\r\n                            </ng-multiselect-dropdown>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"Parent.get('SelectedOrders').value.length >= 1\">\r\n                            <ng-multiselect-dropdown formControlName=\"AccessorialFeeId\"\r\n                                                     [placeholder]=\"'Type'\"\r\n                                                     (onSelect)=\"OnAccessorialFeeIdSelect()\"\r\n                                                     (onDeSelect)=\"OnAccessorialFeeTableTypeDeSelect()\"\r\n                                                     [settings]=\"MultiSelectSettingsById\"\r\n                                                     [data]=\"AccessorialFeeIdList\">\r\n                            </ng-multiselect-dropdown>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div formArrayName=\"Fees\">\r\n            <div class=\"mt10 mb5\">\r\n                <b>General</b>\r\n            </div>\r\n            <ng-container *ngFor=\"let commonFee of CommonFees; let i = index; let isLast = last\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-10\">\r\n                        <app-fee-type [Parent]=\"Parent\" [FeeGroup]=\"commonFee\" [FeeTypes]=\"FeeTypes\" [Currency]=\"DisplayCurrency\"\r\n                                      [FeeConstraintTypes]=\"FeeConstraintTypes\" [FeeSubTypes]=\"FeeSubTypes\"></app-fee-type>\r\n                    </div>\r\n                    <div class=\"col-sm-2\">\r\n                        <a class=\"fa fa-trash-alt ml10 color-maroon mt10\" (click)=\"removeGeneralFee(true, commonFee)\"></a>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"addGeneralFee(true, null)\"><i class=\"fa fa-plus-circle\"></i> Add Fee</button>\r\n            <div class=\"mt10\">\r\n                <b>Other</b>\r\n            </div>\r\n            <ng-container *ngFor=\"let otherFee of OtherFees; let i = index; let isLast = last\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-10\">\r\n                        <app-fee-type [Parent]=\"Parent\" [FeeGroup]=\"otherFee\" [FeeTypes]=\"FeeTypes\" [Currency]=\"DisplayCurrency\"\r\n                                      [FeeConstraintTypes]=\"FeeConstraintTypes\" [FeeSubTypes]=\"FeeSubTypes\"></app-fee-type>\r\n                    </div>\r\n                    <div class=\"col-sm-2\">\r\n                        <a class=\"fa fa-trash-alt ml10 color-maroon mt10\" (click)=\"removeGeneralFee(false, otherFee)\"></a>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"addGeneralFee(false, null)\"><i class=\"fa fa-plus-circle\"></i> Add Fee</button>\r\n            <div class=\"mt10\">\r\n                <h4>Weekend / Holiday Fee(s)</h4>\r\n            </div>\r\n            <div class=\"mt10 mb5\">\r\n                <b>General </b>\r\n            </div>\r\n            <ng-container *ngFor=\"let spCommonFee of SpCommonFees; let i = index; let isLast = last\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-10\">\r\n                        <app-fee-type [Parent]=\"Parent\" [FeeGroup]=\"spCommonFee\" [FeeTypes]=\"FeeTypes\" [Currency]=\"DisplayCurrency\"\r\n                                      [FeeConstraintTypes]=\"FeeConstraintTypes\" [FeeSubTypes]=\"FeeSubTypes\"></app-fee-type>\r\n                    </div>\r\n                    <div class=\"col-sm-2\">\r\n                        <a class=\"fa fa-trash-alt ml10 color-maroon mt10\" (click)=\"removeSpecialFee(true, spCommonFee)\"></a>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"addSpecialFee(true, 1, null)\"><i class=\"fa fa-plus-circle\"></i> Add Fee</button>\r\n            <div class=\"mt10 mb5\">\r\n                <b>Other</b>\r\n            </div>\r\n            <ng-container *ngFor=\"let spOtherFee of SpOtherFees; let i = index; let isLast = last\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-10\">\r\n                        <app-fee-type [Parent]=\"Parent\" [FeeGroup]=\"spOtherFee\" [FeeTypes]=\"FeeTypes\" [Currency]=\"DisplayCurrency\"\r\n                                      [FeeConstraintTypes]=\"FeeConstraintTypes\" [FeeSubTypes]=\"FeeSubTypes\"></app-fee-type>\r\n                    </div>\r\n                    <div class=\"col-sm-2\">\r\n                        <a class=\"fa fa-trash-alt ml10 color-maroon mt10\" (click)=\"removeSpecialFee(false, spOtherFee)\"></a>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"addSpecialFee(false, 1, null)\"><i class=\"fa fa-plus-circle\"></i> Add Fee</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { FormGroup, FormArray, FormBuilder, Validators } from '@angular/forms';\r\nimport { DropdownItem, DropdownItemExt, FeeSubType } from 'src/app/statelist.service';\r\nimport { ByQuantityModel } from '../model';\r\n@Component({\r\n    selector: 'app-fee-type',\r\n    templateUrl: './fee-type.component.html',\r\n    styleUrls: ['./fee-type.component.css']\r\n})\r\nexport class FeeTypeComponent implements OnInit, OnChanges {\r\n\r\n    @Input() Parent: FormGroup;\r\n    @Input() FeeGroup: FormGroup;\r\n\r\n    @Input() Currency: string; // Input property from fee-list component \r\n\r\n    public DisplayCurrency: any;\r\n\r\n    //----------------DDL------------------\r\n\r\n    @Input() public FeeTypes: DropdownItemExt[];\r\n    @Input() public FeeSubTypes: FeeSubType[];\r\n    @Input() public FeeConstraintTypes: DropdownItem[];\r\n    public DisplayFeeTypes: FeeSubType[];\r\n\r\n\r\n\r\n    constructor(private fb: FormBuilder) {\r\n        this.DisplayFeeTypes = [];\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.FeeGroup.setValidators(this.feeNameRequired('FeeTypeId', 'OtherFeeDescription', 'CommonFee'));\r\n        if (this.FeeSubTypes != null && this.FeeSubTypes != undefined)\r\n            this.DisplayFeeTypes = this.FeeSubTypes.slice();\r\n        this.DisplayCurrency = this.Currency;\r\n    }\r\n\r\n    ngOnChanges(change: SimpleChanges) {\r\n        if (change.FeeSubTypes && change.FeeSubTypes.currentValue != null) {\r\n            // var subTypes = change.FeeSubTypes.currentValue as FeeSubType[];\r\n            // this.DisplayFeeTypes = subTypes;\r\n            this.updateSubType(this.FeeGroup.get('FeeTypeId').value)\r\n        }\r\n\r\n        if (change.Currency && change.Currency.currentValue) {\r\n            var currency = change.Currency.currentValue;\r\n            this.DisplayCurrency = currency;\r\n        }\r\n    }\r\n\r\n    updateSubType(feeTypeId: string): void {\r\n        let feeSubTypes = this.FeeSubTypes.slice().filter(function (elem) { return elem.FeeTypeId == feeTypeId; });\r\n        if (feeSubTypes.length == 0) {\r\n            let otherFeeSubTypes = [17, 5, 2];\r\n            this.DisplayFeeTypes = this.FeeSubTypes.slice().filter(function (elem) { return otherFeeSubTypes.includes(elem.FeeSubTypeId) && elem.FeeTypeId == \"14\"  });\r\n        }\r\n        else {\r\n            this.DisplayFeeTypes = feeSubTypes;\r\n        }\r\n    }\r\n\r\n    getForm(_fee: ByQuantityModel): FormGroup {\r\n        return this.fb.group({\r\n            Currency: this.fb.control(_fee.Currency),\r\n            MinQuantity: this.fb.control(_fee.MinQuantity, [Validators.required, Validators.pattern(/^([0-9]\\d*(\\.\\d+)?)$/)]),\r\n            MaxQuantity: this.fb.control(_fee.MaxQuantity, [Validators.pattern(/^([0-9]\\d*(\\.\\d+)?)$/), Validators.required]),\r\n            Fee: this.fb.control(_fee.Fee, [Validators.required, Validators.pattern(/^([0-9]\\d*(\\.\\d+)?)$/)])\r\n        });\r\n    }\r\n\r\n    addByQtyFee(fee: FormGroup, feeObj: ByQuantityModel): void {\r\n        if (feeObj == null) {\r\n            feeObj = new ByQuantityModel();\r\n        }\r\n        var _fees = fee.get('DeliveryFeeByQuantity') as FormArray;\r\n        if (_fees.controls.length > 0) {\r\n            var lastMax = _fees.controls[_fees.controls.length - 1].get('MaxQuantity');\r\n            lastMax.setValidators([Validators.required, Validators.pattern(/^([0-9]\\d*(\\.\\d+)?)$/)]);\r\n            feeObj.MinQuantity = lastMax.value;\r\n        }\r\n        var _form = this.getForm(feeObj);\r\n   \r\n        _fees.push(_form);\r\n    }\r\n\r\n    removeByQtyFee(fee: FormGroup, index: number): void {\r\n        var _fees = fee.get('DeliveryFeeByQuantity') as FormArray;\r\n        _fees.removeAt(index);\r\n        if (_fees.controls.length > 0) {\r\n            var lastMax = _fees.controls[_fees.controls.length - 1].get('MaxQuantity');\r\n            lastMax.setValidators([Validators.pattern(/^([0-9]\\d*(\\.\\d+)?)$/), Validators.required]);\r\n        }\r\n    }\r\n\r\n    isInvalid(group: FormGroup, name: string): boolean {\r\n        return group.get(name).invalid &&\r\n            (group.get(name).dirty || group.get(name).touched || group.get(name).invalid);\r\n    }\r\n\r\n    isRequired(group: FormGroup, name: string): boolean {\r\n        return group.get(name).errors.required;\r\n    }\r\n\r\n    isFeeNameRequired(group: FormGroup, name: string): boolean {\r\n        return group.get(name).errors.required;\r\n    }\r\n\r\n    handleByQuantity(group: FormGroup, subTypeId: number): void {\r\n        var fee = group.get('Fee');\r\n        if (subTypeId == 3) {\r\n            fee.setValue(0);\r\n        } else {\r\n            if (fee.value == 0) {\r\n                fee.setValue('');\r\n            }\r\n            (group.get('DeliveryFeeByQuantity') as FormArray).clear();\r\n        }\r\n    }\r\n\r\n    feeNameRequired(field1Name: string, field2Name: string, field3Name: string): any {\r\n        let field1 = this.FeeGroup.controls[field1Name];\r\n        let field2 = this.FeeGroup.controls[field2Name];\r\n        let field3 = this.FeeGroup.controls[field3Name];\r\n        if (field3.value && (field1.value == null || field1.value == '')) {\r\n            return Validators.required(field1);\r\n        } else if (!field3.value && (field2.value == null || field2.value.replace(/\\s/g, '') == '')) {\r\n            return Validators.required(field2);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n","<div class=\"row\" [formGroup]=\"FeeGroup\">\r\n    <div class=\"col-sm-3\">\r\n        <input type=\"hidden\" formControlName=\"OrderId\" />\r\n        <input type=\"hidden\" formControlName=\"CommonFee\" />\r\n        <input type=\"hidden\" formControlName=\"TruckLoadType\" />\r\n        <input type=\"hidden\" formControlName=\"TruckLoadCategoryId\" />\r\n        <input type=\"hidden\" formControlName=\"CommonFee\" />\r\n        <input type=\"hidden\" formControlName=\"IncludeInPPG\" />\r\n        <select formControlName=\"FeeTypeId\" class=\"form-control\"\r\n                [style.display]=\"FeeGroup.get('CommonFee').value ? 'block' : 'none'\"\r\n                #feeTypeId (change)=\"updateSubType(FeeGroup.get('FeeTypeId').value)\">\r\n            <option *ngIf=\"!FeeGroup.get('FeeTypeId').value\" [value]=\"null\">Select Fee</option>\r\n            <option *ngFor=\"let ft of FeeTypes\" [ngValue]=\"ft.Code\" [selected]=\"ft.Code==FeeGroup.get('FeeTypeId').value\">{{ft.Name}}</option>\r\n        </select>\r\n        <div class=\"mb15 form-group\">\r\n            <input type=\"text\" formControlName=\"OtherFeeDescription\" [style.display]=\"FeeGroup.get('CommonFee').value ? 'none' : 'block'\" class=\"form-control\" placeholder=\"Fee Name\" />\r\n            <span *ngIf=\"isInvalid(FeeGroup, 'FeeTypeId') || isInvalid(FeeGroup, 'OtherFeeDescription')\" class=\"color-maroon\">\r\n                <span *ngIf=\"isRequired(FeeGroup, 'FeeTypeId') || isFeeNameRequired(FeeGroup, 'OtherFeeDescription')\">\r\n                    Required.\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-sm-3\">\r\n        <div class=\"form-group\">\r\n            <select formControlName=\"FeeSubTypeId\" class=\"form-control\" (focus)=\"updateSubType(FeeGroup.get('FeeTypeId').value)\"\r\n                    (change)=\"handleByQuantity(FeeGroup, FeeGroup.get('FeeSubTypeId').value)\">\r\n                <option *ngIf=\"!FeeGroup.get('FeeSubTypeId').value\" [value]=\"null\">Select Fee Type</option>\r\n                <option *ngFor=\"let fst of DisplayFeeTypes\" [value]=\"fst.FeeSubTypeId\"\r\n                        [selected]=\"fst.FeeSubTypeId==FeeGroup.get('FeeSubTypeId').value\">\r\n                    {{fst.SubTypeName}}\r\n                </option>\r\n            </select>\r\n            <span *ngIf=\"isInvalid(FeeGroup, 'FeeSubTypeId')\" class=\"color-maroon pa\">\r\n                <span *ngIf=\"isRequired(FeeGroup, 'FeeSubTypeId')\">\r\n                    Required.\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-sm-3\" *ngIf=\"FeeGroup.get('FeeConstraintTypeId').value!=null\">\r\n        <div class=\"form-group\">\r\n            <select formControlName=\"FeeConstraintTypeId\" *ngIf=\"FeeGroup.get('FeeConstraintTypeId').value\" class=\"form-control\">\r\n                <option *ngFor=\"let fc of FeeConstraintTypes\" [value]=\"fc.Id\"\r\n                        [selected]=\"fc.Id==FeeGroup.get('FeeConstraintTypeId').value\">\r\n                    {{fc.Name}}\r\n                </option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-sm-3\" *ngIf=\"FeeGroup.get('FeeConstraintTypeId').value==2\">\r\n        <div class=\"form-group\">\r\n            <input type=\"text\" formControlName=\"SpecialDate\" class=\"form-control datepicker\" placeholder=\"Date\" myDatePicker [format]=\"'MM/DD/YYYY'\" (onDateChange)=\"FeeGroup.get('SpecialDate').setValue($event)\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"col-sm-3\" *ngIf=\"FeeGroup.get('FeeTypeId').value == '8'\">\r\n        <input type=\"text\" formControlName=\"MinimumGallons\" class=\"form-control\" placeholder=\"Min Quantity\" />\r\n    </div>\r\n    <div class=\"col-sm-3\">\r\n        <div class=\"form-group\">\r\n            <div class=\"input-group\">\r\n                <input type=\"text\" formControlName=\"Fee\" class=\"form-control\" *ngIf=\"FeeGroup.get('FeeSubTypeId').value != 3\" placeholder=\"Fee\" />\r\n                <div class=\"input-group-addon fs12\" *ngIf=\"FeeGroup.get('FeeSubTypeId').value != 3\">{{DisplayCurrency}}</div>\r\n            </div>\r\n            <span *ngIf=\"isInvalid(FeeGroup, 'Fee')\" class=\"color-maroon\">\r\n                <span *ngIf=\"isRequired(FeeGroup, 'Fee')\">\r\n                    Required.\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-sm-9\" *ngIf=\"FeeGroup.get('FeeSubTypeId').value == 3\">\r\n        <div formArrayName=\"DeliveryFeeByQuantity\">\r\n            <div *ngFor=\"let byQty of FeeGroup.get('DeliveryFeeByQuantity')['controls'];  let i = index;\">\r\n                <div class=\"row\" [formGroupName]=\"i\">\r\n                    <div class=\"col-sm-3 pr0 mb5\">\r\n                        <input type=\"hidden\" formControlName=\"Currency\" />\r\n                        <input type=\"text\" formControlName=\"MinQuantity\" class=\"form-control\" readonly=\"readonly\" placeholder=\"Min Quantity\" />\r\n                    </div>\r\n                    <div class=\"col-sm-3 pr0 mb5\">\r\n                        <input type=\"text\" formControlName=\"MaxQuantity\" class=\"form-control\" placeholder=\"Max Quantity\" />\r\n                        <span *ngIf=\"isInvalid(byQty, 'MaxQuantity')\" class=\"color-maroon\">\r\n                            <span *ngIf=\"isRequired(byQty, 'MaxQuantity')\">\r\n                                Required.\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"col-sm-3 pr0 mb5\">\r\n                        <input type=\"text\" formControlName=\"Fee\" class=\"form-control\" placeholder=\"Fee\" />\r\n                        <span *ngIf=\"isInvalid(byQty, 'Fee')\" class=\"color-maroon\">\r\n                            <span *ngIf=\"isRequired(byQty, 'Fee')\">\r\n                                Required.\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"col-sm-1\">\r\n                        <a (click)=\"removeByQtyFee(FeeGroup, i)\"><i class=\"fa fa-trash-alt color-maroon mt10\"></i></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"row mb10\">\r\n                <div class=\"col-sm-12\">\r\n                    <a (click)=\"addByQtyFee(FeeGroup, null)\"><i class=\"fa fa-plus-circle\"></i> Add Quantity Range</a>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n@Pipe({\r\n    name: 'filter'\r\n})\r\nexport class FilterPipe implements PipeTransform {\r\n\r\n    transform(items: any[], field: string, value: string): any[] {\r\n        if (!items) {\r\n            return [];\r\n        }\r\n        if (!field || !value) {\r\n            return items;\r\n        }\r\n\r\n        var filtered = items.filter(singleItem => singleItem[field].value == value);\r\n        return filtered;\r\n    }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FeeListComponent } from './fee-list/fee-list.component';\r\nimport { FeeTypeComponent } from './fee-list/fee-type.component';\r\nimport { FilterPipe } from './fee-list/filter.pipe';\r\nimport { GlobalModule } from '../modules/global.module';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgMultiSelectDropDownModule } from 'ng-multiselect-dropdown';\r\nimport { ConfirmationPopoverModule } from 'angular-confirmation-popover';\r\nimport { DirectiveModule } from '../modules/directive.module';\r\nimport { AngularMultiSelectModule } from 'angular2-multiselect-dropdown';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        FeeListComponent,\r\n        FeeTypeComponent,\r\n        FilterPipe],\r\n    imports: [\r\n        CommonModule,\r\n        GlobalModule,\r\n        NgbModule,\r\n        NgMultiSelectDropDownModule.forRoot(),\r\n        ConfirmationPopoverModule.forRoot({\r\n            confirmButtonType: 'danger' // set defaults here\r\n        }),\r\n        DirectiveModule,\r\n        AngularMultiSelectModule\r\n    ],\r\n    exports: [\r\n        FeeListComponent, \r\n        FeeTypeComponent,\r\n        FilterPipe]\r\n})\r\nexport class FeesModule { }\r\n","export class FeeModel {\r\n    public OrderId: number;\r\n    public Currency: number;\r\n    public TruckLoadType: number;\r\n    public TruckLoadCategoryId: number;\r\n    public CommonFee: boolean;\r\n    public FeeConstraintTypeId: number;\r\n    public SpecialDate: string;\r\n    public FeeTypeId: string;\r\n    public FeeSubTypeId: number;\r\n    public OtherFeeDescription: string;\r\n    public MinimumGallons: number;\r\n    public DeliveryFeeByQuantity: ByQuantityModel[];\r\n    public Fee: number;\r\n    public IncludeInPPG: boolean;\r\n}\r\n\r\nexport class ByQuantityModel {\r\n    Currency: number;\r\n    MinQuantity: number = 0;\r\n    MaxQuantity: number;\r\n    Fee: number;\r\n}\r\n\r\nexport function IsMatched(x: FeeModel, y: FeeModel) {\r\n    return y.FeeTypeId == x.FeeTypeId\r\n        && y.FeeSubTypeId == x.FeeSubTypeId\r\n        && y.CommonFee == x.CommonFee\r\n        && y.FeeConstraintTypeId == x.FeeConstraintTypeId;\r\n};\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable, ObservableLike } from 'rxjs';\r\nimport { catchError, map, tap } from 'rxjs/operators';\r\nimport { HandleError } from '../../errors/HandleError';\r\nimport { DropdownItem, DropdownItemExt, FeeSubType } from '../../statelist.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FeeService extends HandleError {\r\n\r\n    private getFeeTypesUrl = '/Supplier/Invoice/GetFeeTypes?orderId=';\r\n    private getFeeSubTypesUrl = '/Supplier/Invoice/GetFeeSubTypes?orderId=';\r\n    private getSalesFeeTypesUrl = '/SalesUser/SourcingRequest/GetFeeTypes?currency=';\r\n    private getSalesFeeSubTypesUrl = '/SalesUser/SourcingRequest/GetFeeSubTypes?currency=';\r\n    private getFeeConstraintTypesUrl = '/Supplier/Invoice/GetFeeConstraintTypes';\r\n    //private getEiaPriceUrl = '/Supplier/Invoice/GetEIAPrice';\r\n\r\n    constructor(private httpClient: HttpClient) {\r\n        super();\r\n    }\r\n\r\n    getFeeTypes(orderId: number,currancy: string, isSale:boolean): Observable<DropdownItemExt[]> {\r\n        if(isSale){\r\n            return this.httpClient.get<DropdownItemExt[]>(this.getSalesFeeTypesUrl + currancy)\r\n            .pipe(catchError(this.handleError<DropdownItemExt[]>('getSalesFeeTypesUrl', [])));\r\n        }else{\r\n            return this.httpClient.get<DropdownItemExt[]>(this.getFeeTypesUrl + orderId)\r\n            .pipe(catchError(this.handleError<DropdownItemExt[]>('getFeeTypes', [])));\r\n        }\r\n        \r\n    }\r\n\r\n    getFeeSubTypes(orderId: number,currancy: string, isSale:boolean): Observable<FeeSubType[]> {\r\n        if(isSale){\r\n            return this.httpClient.get<FeeSubType[]>(this.getSalesFeeSubTypesUrl + currancy)\r\n            .pipe(catchError(this.handleError<FeeSubType[]>('getSalesFeeSubTypesUrl', [])));\r\n        }else{\r\n            return this.httpClient.get<FeeSubType[]>(this.getFeeSubTypesUrl + orderId)\r\n            .pipe(catchError(this.handleError<FeeSubType[]>('getFeeSubTypes', [])));\r\n        }\r\n       \r\n    }\r\n\r\n    getFeeConstraintTypes(): Observable<DropdownItem[]> {\r\n        return this.httpClient.get<DropdownItem[]>(this.getFeeConstraintTypesUrl)\r\n            .pipe(catchError(this.handleError<DropdownItem[]>('getFeeConstraintTypes', [])));\r\n    }\r\n\r\n   \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HandleError } from '../../errors/HandleError';\r\nimport { catchError, map, tap } from 'rxjs/operators';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { InvoiceDetailModel, AssetDropModel, DropDetailModel, FeeModel, MFNConversionRequestViewModel, BlendedSchedules } from '../models/DropDetail';\r\nimport { DropdownItem } from 'src/app/statelist.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class InvoiceService extends HandleError {\r\n\r\n    private getPoListUrl: string = '/Supplier/invoice/GetCustomerPoList?orderId=';\r\n    private getDefaultUrl: string = '/Supplier/Invoice/GetInvoiceViewModel?orderId=';\r\n    private getAssetstUrl: string = '/Supplier/Invoice/GetAssignedAssets?orderId=';\r\n    private getAnotherProductUrl: string = '/Supplier/Invoice/GetInvoiceDropModel?orderId=';\r\n    private getTerminalsUrl: string = '/Supplier/Invoice/GetTerminals?orderId=';\r\n    private getTerminalPriceByIdUrl: string = '/Supplier/Invoice/GetTerminalPriceById';\r\n    private postCreateInvoiceUrl: string = '/Supplier/Invoice/CreateNew';\r\n    private postConvertToInvoiceUrl: string = '/Supplier/Invoice/ConvertToInvoice?ddtId=';\r\n    private getInvoiceDropFeesUrl = '/Supplier/invoice/GetInvoiceDropFees?orderId=';\r\n    private getSchedulesUrl = '/Supplier/invoice/GetDeliverySchedules?orderId=';\r\n    private getInvoiceDetailsUrl = '/Supplier/Invoice/GetOriginalInvoiceDetails?invoiceId=';\r\n    private getTaxePricingTypesUrl = '/Supplier/Invoice/GetTaxePricingTypes?orderId=';\r\n    private getDriverListUrl = '/Supplier/Invoice/GetAllDrivers';\r\n    private getsastokenurl: string = '/Supplier/Invoice/GetSasToken';\r\n    private getAssignedurl: string = '/Supplier/Invoice/GetAssignedDriver?scheduleId=';\r\n    private getCalculatedDropqtysUrl: string = '/Supplier/Invoice/CalculateDropQuantitiesFromPrePostForCreateInvoice';\r\n    private validateGravityUrl: string = '/Supplier/Invoice/ValidateGravityAndConvertForMFN';\r\n    private getEiaPriceUrl = '/Supplier/Invoice/GetEIAPrice';\r\n    private getEiaPriceAutoFreightMethodUrl = 'Supplier/Invoice/GetEIAPriceForAutoFreightMethod';\r\n    private getBlendedProductsUrl = '/Supplier/Invoice/GetBlendedProducts?blendGroupId=';\r\n    private getFreightTableTypesUrl = '/FreightRate/GetFreightRateRuleTypes';\r\n    public getTableTypesUrl = \"/FuelSurcharge/GetTableTypes\";\r\n    public getFreightTableNameUrl = '/Freight/GetFreightRateTablesForInvoice';\r\n    public getFuelSurchargeTableNameUrl = 'FuelSurcharge/GetFuelSurchargeTablesForInvoice';\r\n    public getAccessorialTableNameUrl = 'FuelSurcharge/GetAccessorialFeeTablesForInvoice';\r\n    public GetAccessorialFeeTablesForConsolidatedUrl = 'FuelSurcharge/GetAccessorialFeeTablesForConsolidated';\r\n    public GetAccessorialFeeTablesForSelectedOrderUrl = 'FuelSurcharge/GetAccessorialFeeTablesForSelectedOrder';\r\n    public getAccessorialFeeByOrderUrl = 'Supplier/Invoice/GetAccessorialFeeByOrder';\r\n    public getAccessorialFeeByAccessorialFeeIdUrl = 'Supplier/Invoice/GetAccessorialFeeByAccessorialFeeId';\r\n    public GetFreightCostForAutoInvoiceUrl = 'FuelSurcharge/GetFreightCostForInvoice';\r\n    constructor(private httpClient: HttpClient) {\r\n        super();\r\n    }\r\n\r\n    getDefaultDetail(_orderId: number, trackableScheduleId: number): Observable<InvoiceDetailModel> {\r\n        return this.httpClient.get<InvoiceDetailModel>(this.getDefaultUrl + _orderId + '&trackableScheduleId=' + trackableScheduleId)\r\n            .pipe(catchError(this.handleError<InvoiceDetailModel>('getDefaultDetail', null)));\r\n    }\r\n\r\n    getPoList(orderId: number): Observable<any> {\r\n        return this.httpClient.get(this.getPoListUrl + orderId)\r\n            .pipe(catchError(this.handleError<any>('getPoList', null)));\r\n\r\n    }\r\n\r\n    getAssets(orderId: number): Observable<AssetDropModel[]> {\r\n        return this.httpClient.get<AssetDropModel[]>(this.getAssetstUrl + orderId)\r\n            .pipe(catchError(this.handleError<AssetDropModel[]>('getAssets', [])));\r\n    }\r\n\r\n    getAnotherProductDetail(_orderId: number): Observable<DropDetailModel> {\r\n        return this.httpClient.get<DropDetailModel>(this.getAnotherProductUrl + _orderId)\r\n            .pipe(catchError(this.handleError<DropDetailModel>('getAnotherProductDetail', null)));\r\n    }\r\n\r\n    getTerminals(_orderId: number, _terminal?:string): Observable<DropdownItem[]> {\r\n        return this.httpClient.get<DropdownItem[]>(this.getTerminalsUrl + _orderId + '&terminal=' + _terminal)\r\n            .pipe(catchError(this.handleError<DropdownItem[]>('getTerminals', null)));\r\n    }\r\n\r\n    getTerminalPriceById(terminalId: number, orderId: number, deliveryDate: string): Observable<any> {\r\n        return this.httpClient.post(this.getTerminalPriceByIdUrl, { terminalId: terminalId, orderId: orderId, deliveryDate: deliveryDate })\r\n            .pipe(catchError(this.handleError<any>('getTerminalPriceById')));\r\n    }\r\n    getInvoiceDropFees(_orderId: number): Observable<FeeModel[]> {\r\n        return this.httpClient.get<FeeModel[]>(this.getInvoiceDropFeesUrl + _orderId)\r\n            .pipe(catchError(this.handleError<FeeModel[]>('getInvoiceDropFees', null)));\r\n    }\r\n\r\n    getSchedules(_orderId: number): Observable<DropdownItem[]> {\r\n        return this.httpClient.get<DropdownItem[]>(this.getSchedulesUrl + _orderId)\r\n            .pipe(catchError(this.handleError<DropdownItem[]>('getSchedules', null)));\r\n    }\r\n\r\n    getSASforblobStorage(): Observable<any> {\r\n        return this.httpClient.get(this.getsastokenurl);\r\n    }\r\n\r\n    postCreateInvoice(invoiceModel: any, existingId: number): Observable<any> {\r\n        if (existingId > 0 && !invoiceModel.IsRebillInvoice) {\r\n            return this.httpClient.post<any>(this.postConvertToInvoiceUrl + existingId, invoiceModel)\r\n                .pipe(catchError(this.handleError<any>('postConvertToInvoice', null)));\r\n        } else {\r\n            return this.httpClient.post<any>(this.postCreateInvoiceUrl, invoiceModel)\r\n                .pipe(catchError(this.handleError<any>('postCreateInvoice', null)));\r\n        }\r\n    }\r\n\r\n    postConvertToInvoice(invoiceModel: any, ddtId: number): Observable<any> {\r\n        return this.httpClient.post<any>(this.postConvertToInvoiceUrl + ddtId, invoiceModel)\r\n            .pipe(catchError(this.handleError<any>('postConvertToInvoice', null)));\r\n    }\r\n\r\n    getInvoiceDetails(_invoiceId: number): Observable<InvoiceDetailModel> {\r\n        return this.httpClient.get<InvoiceDetailModel>(this.getInvoiceDetailsUrl + _invoiceId)\r\n            .pipe(catchError(this.handleError<InvoiceDetailModel>('getInvoiceDetails', null)));\r\n    }\r\n    getBlendedProducts(_blendGroupId: string): Observable<BlendedSchedules[]> {\r\n        return this.httpClient.get<BlendedSchedules[]>(this.getBlendedProductsUrl + _blendGroupId)\r\n            .pipe(catchError(this.handleError<BlendedSchedules[]>('getBlendedProducts', null)));\r\n    }\r\n    getTaxePricingTypes(_orderId: number): Observable<DropdownItem[]> {\r\n        return this.httpClient.get<DropdownItem[]>(this.getTaxePricingTypesUrl +_orderId)\r\n            .pipe(catchError(this.handleError<DropdownItem[]>('getTaxePricingTypes', null)));\r\n    }\r\n    getDriverList(): Observable<any> {\r\n        return this.httpClient.get(this.getDriverListUrl).pipe(catchError(this.handleError<any>('getDriverList', null)));\r\n    }\r\n    getAssignedDriverForSchedule(_scheduleId: number, _orderId: number): Observable<any> {\r\n        return this.httpClient.get<any>(this.getAssignedurl + _scheduleId + '&orderId=' + _orderId)\r\n            .pipe(catchError(this.handleError<any>('getAssignedDriverForSchedule', null)));\r\n    }\r\n\r\n    postPrePostAssetsInfo(assetInfo: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.getCalculatedDropqtysUrl,assetInfo)\r\n            .pipe(catchError(this.handleError<any>('postPrePostAssetsInfo', null)));\r\n    }\r\n    ValidateGravityAndConvertForMFN(conversionRequest: MFNConversionRequestViewModel): Observable<any> {\r\n        return this.httpClient.post<any>(this.validateGravityUrl, conversionRequest)\r\n            .pipe(catchError(this.handleError<any>('ValidateGravityAndConvertForMFN', null)));\r\n    }\r\n    getEiaPrice(data: any): Observable<any> {\r\n        return this.httpClient.post(this.getEiaPriceUrl, data)\r\n            .pipe(catchError(this.handleError<DropdownItem[]>('getEiaPrice', [])));\r\n    }\r\n    getEiaPriceAutoFreightMethod(data: any): Observable<any> {\r\n        return this.httpClient.post(this.getEiaPriceAutoFreightMethodUrl, data)\r\n            .pipe(catchError(this.handleError<DropdownItem[]>('getEiaPriceAutoFreightMethod', [])));\r\n    }\r\n    getFreightTable(): Observable<DropdownItem[]> {\r\n        return this.httpClient.get<any>(this.getFreightTableTypesUrl)\r\n            .pipe(catchError(this.handleError<any>('getFreightTable', null)));\r\n    }\r\n    getTableTypes(): Observable<DropdownItem[]> {\r\n        return this.httpClient.get<any>(this.getTableTypesUrl)\r\n            .pipe(catchError(this.handleError<any>('GetTableTypes', null)));\r\n    }\r\n    getFreightTableName(filter: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.getFreightTableNameUrl, filter)\r\n            .pipe(catchError(this.handleError<any>('getFreightTableName', null)));\r\n    }\r\n    getFuelSurchargeTableName(filter: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.getFuelSurchargeTableNameUrl, filter)\r\n            .pipe(catchError(this.handleError<any>('getFuelSurchargeTableName', null)));\r\n    }\r\n    getAccessorialTableName(filter: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.getAccessorialTableNameUrl, filter)\r\n            .pipe(catchError(this.handleError<any>('getAccessorialTableName', null)));\r\n    }\r\n    GetAccessorialFeeTablesForConsolidated(filter: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.GetAccessorialFeeTablesForConsolidatedUrl, filter)\r\n            .pipe(catchError(this.handleError<any>('GetAccessorialFeeTablesForConsolidated', null)));\r\n    }\r\n    GetAccessorialFeeTablesForSelectedOrder(orderIds: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.GetAccessorialFeeTablesForSelectedOrderUrl, { orderIds: orderIds })\r\n            .pipe(catchError(this.handleError<any>('GetAccessorialFeeTablesForSelectedOrder', null)));\r\n    }\r\n   \r\n    GetAccessorialFeeByOrder(orderId: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.getAccessorialFeeByOrderUrl, { orderId: orderId })\r\n            .pipe(catchError(this.handleError<any>('GetAccessorialFeeByOrder', null)));\r\n    }\r\n\r\n    GetAccessorialFeeByAccessorialFeeId(accessorialFeeId: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.getAccessorialFeeByAccessorialFeeIdUrl, { accessorialFeeId: accessorialFeeId })\r\n            .pipe(catchError(this.handleError<any>('GetAccessorialFeeByAccessorialFeeId', null)));\r\n    }\r\n\r\n    GetFreightCostForAutoInvoice(filter: any): Observable<any> {\r\n        return this.httpClient.post<any>(this.GetFreightCostForAutoInvoiceUrl , filter)\r\n            .pipe(catchError(this.handleError<any>('GetFreightCostForAutoInvoice', null)));\r\n    }\r\n}\r\n"],"sourceRoot":"webpack:///"}